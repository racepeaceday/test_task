**1. Анализ и коммуникация**
**Вопросы**

Менеджеру:
- В какое время вы заметили отсутствие заявок?
- Поступают ли заявки с других источников, помимо нашего сайта?
- Возникают ли у вас проблемы при входе в BitDashboard или MailPipe?
- Были какие нибудь изменения в CRM или на сайте?

Маркетологу:
- Делали ли вы изменения в UTM метках? (Просто мало ли мы читаем utm метки, а они не подходят под запросы)
- Есть ли значительные изменения в метрике сайта?

Поддержке сервисов/Разработчику:
- Меняли ли Вы API-ключи/токены авторизации?
- Почему LeadSync вернул 401? (Если ответит "нет" на вопрос, что выше)
- Есть ли технические проблемы с LeadSync?

**План диагностики:**
- Проверить все связки и цепочки между взаимодействиями сервисов.
- Formit & DataValidator: Проверить корректность отправки и принятия данных
- DataValidator & LeadSync: Выяснить почему LeadSync выдает ошибку авторизации (проверить валидность токена). 
- LeadSync & MailPipe / BitDashboard: Убедиться в исправности интеграций, запросить логи за период сбоев, проверить доступность и статус каждого сервиса.
- Проверить вручную API каждого сервиса с помощью тестовых запросов для выявления проблемы.

**2. Техническое задание**

Выполнено на ЯП Python 3.12.

Тестирование:
- Чтобы убедиться в корректной обработке нестабильных сервисов, использовал несколько собственных эндпоинтов.
- Для проверки на долгий ответ (> 2 секунд) сделал mock эндпоинт на Flask - test.py
- Для проверки на повторную ошкибку использовал эндпоинт требующий авторизацию
- Скрипт поддерживает произвольное кол-во сервиов. Вся настройка происходит в config.ini
- Файл app/config.py является переменным окружением, все данные как раз-таки берутся из config.ini.
- Телеграм бот написан на фрейме aiogram, так что код весь асинхронен.

Для запуска бота:
```bash
python3 -m app
```
Запуск чекера
```bash
python3 script.py
```
(Ну думаю что тот кто будет проверять поймет что к чему)

**3. Автоматизация и превентивные меры**

Какую систему мониторинга ты бы внедрил для контроля прохождения лидов по всем 4 этапам (от Formit до CRM)?
- Использовал бы простые инструменты мониторинга, например регулярные проверки работоспособности сервисов через простые скрипты (пример из 2 пункта), которые отправляют тестовые запросы и уведомляют при проблемах через мессенджер для удобства.

Какие метрики, статусы, и аномалии важно отслеживать (например: нулевая отправка, превышение задержки)?
- Отслеживал бы количество поступающих заявок (полное отсутствие или множественные запросы с одного адреса)
- Следил бы за временем обработки заявки (значительное увеличение времени обработки)
- Проверял бы частоту и тип ошибок (например 401, 403, 500)

Как бы ты реализовал сравнение данных между Formit и CRM (BitDashboard), чтобы находить потери?
- Сделал бы скрипт, который сравнивает количество заявок, полученных в Formit, и количество заявок, отображённых в BitDashboard за одинаковый период, при несовпадениях, делал алерт любыми доступными способами, опять же к примеру телега.

Как бы ты объяснил руководителю (не технарю), что произошло и как ты устранил проблему?
- Произошла ошибка при передаче данных между DataValidator и LeadSync. Из-за этого заявки не попадали в CRM и не приходили на почту. Выявил причину, обновил настройки и проверил, что заявки снова поступают корректно. Чтобы в будущем не было таких ситуаций, сделал простую систему проверок и уведомлений, которая сможет сообщить о любых сбоях.
